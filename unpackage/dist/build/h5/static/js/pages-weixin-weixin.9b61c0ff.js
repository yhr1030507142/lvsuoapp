(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-weixin-weixin"],{"24d2":function(e,n,t){"use strict";var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-uni-view",[e._v("您的微信暂未绑定，请前往PC端绑定微信")])},o=[];t.d(n,"a",function(){return a}),t.d(n,"b",function(){return o})},"4c0b":function(e,n,t){"use strict";t.r(n);var a=t("7b22"),o=t.n(a);for(var i in a)"default"!==i&&function(e){t.d(n,e,function(){return a[e]})}(i);n["default"]=o.a},"7b22":function(e,n,t){"use strict";var a=t("288e");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,t("28a5"),t("386d");a(t("5ae5"));var o=a(t("4328")),i={data:function(){return{password:"",username:""}},onLoad:function(){var e=this;e.getParams()},beforeDestroy:function(){uni.removeStorageSync("weixin")},methods:{getParams:function(){var e=this,n=location.search,t=new Object;if(-1!=n.indexOf("?")){for(var a=n.substr(1),i=a.split("&"),s=0;s<i.length;s++)t[i[s].split("=")[0]]=unescape(i[s].split("=")[1]);if(e.code=t.code,""==e.code||null==e.code)return uni.showToast({title:"微信信息没有获取，请重新登录",icon:"none"}),uni.navigateTo({url:"../login/login"}),!1;uni.request({url:e.$api+"Login/Wechat",data:{code:e.code,AppID:"wx4c958b0745e83859",AppSecret:"1ee1c1f93c8d2889403105d88f7f1c90"},method:"GET",success:function(n){if(console.log(n),2==n.data.sign){e.password=n.data.Password,e.username=n.data.Username;var t=e.username+"&&"+e.password;o.default.stringify({str:t});uni.request({url:e.$api+"Login/Judging_Landing",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded"},data:o.default.stringify({str:t}),success:function(n){return console.log(n),1==n.data?(uni.showToast({title:"用户名错误",icon:"none"}),!1):2==n.data?(uni.showToast({title:"密码错误",icon:"none"}),!1):3==n.data?(uni.showToast({title:"该账户被锁定",icon:"none"}),!1):(5==n.data&&uni.showModal({title:"提示",content:"此账号已在其他地方登录, 是否继续登录?",success:function(n){n.confirm?uni.request({url:e.$api+"Login/Occupancy_Landing",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded"},data:o.default.stringify({str:t}),success:function(e){console.log(e),uni.setStorageSync("userId",e.data.User_Id),uni.setStorageSync("sessionId",e.data.sessionId),uni.setStorageSync("Rule_Id",e.data.Rule_Id),uni.setStorageSync("Expiration_Date",e.data.Expiration_Date),uni.setStorageSync("Username",e.data.Username),console.log(uni.getStorageSync("userId")),uni.switchTab({url:"../index/index"})}}):n.cancel&&(console.log("用户点击取消"),uni.navigateTo({url:"../login/login"}))}}),void(4==n.data&&(uni.getStorageSync("userId")&&uni.request({url:e.$api+"Login/Exit_Landing",method:"GET",data:{sessionId:uni.getStorageSync("sessionId")},success:function(e){1==e.data&&(uni.removeStorageSync("userId"),uni.removeStorageSync("sessionId"),uni.removeStorageSync("Rule_Id"),uni.removeStorageSync("Expiration_Date"),uni.removeStorageSync("Username"))}}),uni.request({url:e.$api+"Login/Rsa_Land",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded"},data:o.default.stringify({str:t}),success:function(e){console.log(e),uni.setStorageSync("userId",e.data.User_Id),uni.setStorageSync("sessionId",e.data.sessionId),uni.setStorageSync("Rule_Id",e.data.Rule_Id),uni.setStorageSync("Expiration_Date",e.data.Expiration_Date),uni.setStorageSync("Username",e.data.Username),console.log(uni.getStorageSync("userId")),uni.switchTab({url:"../index/index"})}}))))}})}else uni.showToast({title:"您的微信尚未绑定账号,请在pc端绑定",icon:"none",duration:2e3,success:function(){return uni.navigateTo({url:"../login/login"}),!1}})}})}}}};n.default=i},e635:function(e,n,t){"use strict";t.r(n);var a=t("24d2"),o=t("4c0b");for(var i in o)"default"!==i&&function(e){t.d(n,e,function(){return o[e]})}(i);var s=t("2877"),r=Object(s["a"])(o["default"],a["a"],a["b"],!1,null,"47cc17dc",null);n["default"]=r.exports}}]);